<article class="panel panel-info">
  <header class="panel-heading">
    <h1 ng-if="!geometry.editing">{{geometry.name}}</h1>
    <h1 ng-if="geometry.editing"><input type="text" ng-model="geometry.name" class="form-control form-custom form-header" /></h1>
    {{geometry.geo_type}}
  </header>
  <div class="panel-body">
    <div class="row">
      <div class="col-md-12">
        <div class="btn-group">
          <a class="btn btn-default" ng-click="delete()"><span class="glyphicon glyphicon-trash"> Delete</span></a>
          <a class="btn btn-default" ng-click="report()"><span class="glyphicon glyphicon-exclamation-sign"> Report</span></a>
          <a class="btn btn-default" ng-click="finish()" ng-if="!geometry.final"><span class="glyphicon glyphicon-ok"> Finalize</span></a>
          <a class="btn btn-default disabled" ng-if="geometry.final">Finalized</span></a>
        </div>
        <a ng-if="!geometry.editing" ng-click="geometry.startEdit()" class="btn btn-default pull-right"><span class="glyphicon glyphicon-pencil"></span></a>
        <a ng-if="geometry.editing" ng-click="geometry.stopEdit()" class="btn btn-default pull-right"><span class="glyphicon glyphicon-ok"></span></a>
      </div>
    </div>
    <br />
    <div ng-if="!geometry.editing">
      <div>{{geometry.description}}</div>
    </div>
    <br />
    <div class="row">
      <div class="col-md-12">
        <span class="btn btn-default btn-file">
          <span class="upload-file-text">
            {{geometry.geo_file_name}}
          </span>
          <input type="file" name="geometry[geo]" onchange="angular.element(this).scope().uploadFile(this.files)"/>
        </span>
      </div>
    </div>
    <br />
    <div ng-if="geometry.editing">
      <p><textarea type="text" ng-model="geometry.description" class="form-control form-custom" /></p>
    </div>
    <div class="row">
      <div class="col-md-4">
        <table class="table table-hover table-striped">
          <tbody>
            <tr ng-repeat="(attr_name, attr_type) in geometry.attributes()">
              <td>{{attr_name}}</td>
              <td ng-if="!(geometry.editing && !geometry.final)">{{geometry[attr_name]}}</td>
              <td ng-if="geometry.editing && !geometry.final">
                <input ng-if="attr_type=='free-input'" type="text" ng-model="geometry[attr_name]" class="form-control" />
                <select ng-if="attr_type!='free-input'" type="text" ng-options="option as option for option in attr_type" ng-model="geometry[attr_name]" class="form-control form-custom" /></select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    <div class="row">
  </div>
</article>
